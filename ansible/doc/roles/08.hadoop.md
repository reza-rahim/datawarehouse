# Hadoop Installation and Configuration Tasks

This Ansible playbook segment performs the installation and setup of Hadoop by checking for existing installations, extracting the required package, and setting up a standardized symbolic link.

## Tasks Overview

### 1. Check for Existing Hadoop Installation

```yaml
- name: Check that the hadoop home exists
  stat:
    path: '{{ hadoop_home }}'
  register: hadoop_stat_result
```

- **Purpose**: Verifies whether Hadoop is already installed at the specified `hadoop_home` path.
- **Result**: Stores the check outcome in the variable `hadoop_stat_result`.

### 2. Extract Hadoop Archive (Conditional)

```yaml
- name: extract hadoop zip
  unarchive:
    src: "http://{{ hostvars[groups['repo'][0]]['ansible_host'] }}/download/{{ hadoop_file_name }}.tar.gz"
    dest: /opt
    remote_src: true
    owner: '{{ hadoop_user }}'
    group: '{{ hadoop_group }}'
  when: not hadoop_stat_result.stat.exists
```

- **Purpose**: Downloads and extracts the Hadoop tarball from a remote repository.
- **Condition**: Only runs if Hadoop is not already installed (based on the `stat` result).
- **Target Location**: `/opt`
- **Ownership**: Ensures correct file ownership using `hadoop_user` and `hadoop_group`.

### 3. Create Symbolic Link for Hadoop

```yaml
- name: create soft link to /opt/hadoop
  file:
    src: '/opt/{{ hadoop_file_name }}'
    dest: '{{ hadoop_home }}'
    state: link
```

- **Purpose**: Creates a symbolic link from the actual Hadoop installation directory to a standard location (`hadoop_home`).
- **Benefit**: Simplifies version upgrades and references by abstracting the Hadoop directory path.

